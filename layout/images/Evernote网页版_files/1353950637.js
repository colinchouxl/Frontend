define("ga-util",["jquery"],function(b){var c={},a,e=function(){return window.ga||function(){window.console&&window.console.log("DEBUG: GA not found on window.")}},g=function(){a||e()("require","ecommerce","ecommerce.js");a=!0},f=function(d){var a=b.Deferred();if("object"!==typeof d||"event"===d.hitType&&(!d.eventCategory||!d.eventAction))return a.reject(),a.promise();d.hitCallback=function(){a.resolve()};e()("send",d);return a.promise()};c.trackEvent=function(d,a,e,p,c){d={hitType:"event",eventCategory:d,
eventAction:a,eventLabel:e};"number"===typeof p&&(d.eventValue=p);return f(b.extend(d,c))};c.set=function(d,a){e()("set",d,a)};c.trackPageview=function(d,a){return f(b.extend({hitType:"pageview",page:d},a))};c.addTrans=function(d){g();var a={id:d.id,revenue:d.total};d.affiliation&&(a.affiliation=d.affiliation);d.shipping&&(a.shipping=d.shipping);d.tax&&(a.tax=d.tax);d.currency&&(a.currency=d.currency);e()("ecommerce:addTransaction",a)};c.addItem=function(a){g();var b={id:a.transactionId,name:a.productName,
sku:a.sku};a.category&&(b.category=a.category);a.unitPrice&&(b.price=a.unitPrice);a.quantity&&(b.quantity=a.quantity);e()("ecommerce:addItem",b)};c.trackTrans=function(){e()("ecommerce:send")};return c});
define("experiment",["ga-util"],function(b){var c=function(a,b,c){this._name=a;this._alternatives=[];this._userType=b;this._userID=c};c.prototype={_choose:function(){var a;a=this._userID&&"number"===typeof this._userID&&0===this._userID%1?this._userID%this._alternatives.length:Math.floor(Math.random()*this._alternatives.length);return this._alternatives[a]},alternative:function(a,b){if("function"!==typeof b)throw Error("alternative must be a function, but was "+b);this._alternatives.push({name:a,
run:b});return this},run:function(){this._alternative=this._choose();this._alternative.run();b.trackEvent(this._name,this._alternative.name,"view",this._userType);return this},success:function(){if(!this._alternative)throw Error("Experiment#run() must be called before Experiment#success()");if(null==this._success)return this._success=!0,b.trackEvent(this._name,this._alternative.name,"success",this._userType);var a=$.Deferred();a.resolve(this._success);return a.promise()}};return c});
define("en-locale",[],function(){var b={DEFAULT_LOCALE:"en",getLocale:function(){var c=document.getElementsByName("en:locale");return c=!c||0==c.length?b.DEFAULT_LOCALE:escape(c.item(0).content)}};return b});var JSON;JSON||(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=t[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,e){var l,g,n,r,s=f,m,h=e[b];h&&("object"===typeof h&&"function"===typeof h.toJSON)&&(h=h.toJSON(b));"function"===typeof k&&(h=k.call(e,b,h));switch(typeof h){case "string":return c(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";f+=d;m=[];if("[object Array]"===Object.prototype.toString.apply(h)){r=h.length;for(l=0;l<r;l+=1)m[l]=a(l,h)||"null";n=0===m.length?"[]":f?"[\n"+f+m.join(",\n"+f)+"\n"+s+"]":"["+m.join(",")+"]";f=s;return n}if(k&&"object"===typeof k){r=k.length;for(l=0;l<r;l+=1)"string"===typeof k[l]&&(g=k[l],(n=a(g,h))&&m.push(c(g)+(f?": ":":")+n))}else for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&(n=a(g,h))&&m.push(c(g)+(f?": ":":")+n);n=0===m.length?"{}":f?"{\n"+f+m.join(",\n"+
f)+"\n"+s+"}":"{"+m.join(",")+"}";f=s;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,d,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,e,g){var c;d=f="";if("number"===typeof g)for(c=0;c<g;c+=1)d+=" ";else"string"===typeof g&&(d=g);if((k=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function d(a,f){var e,g,c=a[f];if(c&&"object"===typeof c)for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(g=d(c,e),void 0!==g?c[e]=g:delete c[e]);return b.call(a,f,c)}var f;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof b?d({"":f},""):f;throw new SyntaxError("JSON.parse");})})();define("json2",function(){});
define("i18n",["jquery","en-locale","common","json2","domReady!"],function(b,c){null==Evernote.i18n&&(Evernote.i18n={});var a=Evernote.i18n;a.isFunction=function(a){return"undefined"!=typeof a&&"function"==typeof a};Evernote.i18n.onReady=function(b){a.defer.done(b)};Evernote.i18n.runReady=function(){a.defer.resolve(a)};(function(){a.defer=b.Deferred();a.fns=[];a.baseUrl||(a.baseUrl="/redesign/global/js/i18n/i18n");a.fatalError||(a.fatalError=function(a){"undefined"!==typeof console&&null!=console.error&&
console.error("i18n: "+a)});var e=c.getLocale(),g=function(b){var d=new XMLHttpRequest,c=a.baseUrl+("en"===b?"":"_"+b)+".json";d.open("GET",c,!0);d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status){try{a.messages=JSON.parse(d.responseText)||{}}catch(e){a.fatalError('Error parsing Evernote locale "'+b+'".\n'+e.toString())}a.runReady()}else if(a.fatalError('Error loading Evernote locale "'+b+'".\nError: '+c+" "+d.statusText),"en"!==b)return g("en")};d.send()};g(e)})();a.LArray=function(a,
b){for(var c=0,d=b.length;c<d;++c)a=a.replace(/\{\{ ([0-9]+) \}\}/g,function(a,d){return b[d]?b[d]:""});return a};a.LObject=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a=a.replace(RegExp("{{ "+c+" }}","g"),b[c]));return a};a.L=function(b,c){if(a.messages=={})return null;var f="";try{f=a.messages[b]}catch(d){a.fatalError(d+" on while looking up key "+b)}return!f?null:"[object Array]"==Object.prototype.toString.call(c)?a.LArray(f,c):a.LObject(f,c)};return a.defer.promise()});var Evernote;
require("jquery common ga-util experiment i18n domReady!".split(" "),function(b,c,a,e,g){null==Evernote&&(Evernote={});var f=b("#chat-button"),d=b(".Menu"),t=b(".User-name"),k=b(".Menu-popover");e=b(".logout",d);g=b(".referral-promo");var p=b(".earn-points-link");f.click(function(a){var b=f.attr("href");a.preventDefault();""!==b&&window.open(b,"_blank")});g.click(function(){var c=b(this).hasClass("free"),d=b(this).attr("href");a.trackEvent("clickEvent","Refer a Friend",c?"free":"premium").always(function(){window.location.href=
d});return!1});p.click(function(){var c=b(this).attr("href");a.trackEvent("clickEvent","Refer a Friend","Earn Points").always(function(){window.location.href=c});return!1});var q=function(){k.toggleClass("is-active");d.toggleClass("is-active")};c.addClickOut(k,q);c.blockDoubleClick(e);b(".Menu-activator").click(function(a){a.preventDefault();a.stopPropagation();q();return!1});b(window).resize(function(){if(c.isIE8||c.isIE9){var a=b(".header-inner \x3e .right").outerWidth(!0),e=b(".header-inner \x3e .left").outerWidth(!0),
f=b(".Banner-title").length?b(".Banner-title").outerWidth(!0):0,g=b(".Menu-indicator").outerWidth(!0),k=b(".User-icon").outerWidth(!0),m=b(".User-nameText").outerWidth(!0),h=d.outerWidth(!0),p=b(".Banner-divider").outerWidth(!0),q=a-h+g+k;return function(){var a=b(window).width()-e-q-p-f-100;a<=m&&t.css("width",a)}}}());b(window).resize()});define("header",function(){});